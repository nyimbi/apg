# APG Capability Registry - Environment Configuration Template
# Copy this file to .env and configure with your specific values

# =============================================================================
# Application Configuration
# =============================================================================

# Environment (development, staging, production)
ENVIRONMENT=development
DEBUG=True
LOG_LEVEL=INFO

# Security
SECRET_KEY=your-super-secret-key-change-this-in-production
JWT_SECRET_KEY=your-jwt-secret-key-change-this-too
ENCRYPTION_KEY=your-encryption-key-32-characters

# =============================================================================
# Database Configuration
# =============================================================================

# PostgreSQL Database
DATABASE_URL=postgresql://registry_user:your_password@localhost:5432/apg_capability_registry
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=30
DATABASE_ECHO=False

# Database connection retry
DATABASE_RETRY_ATTEMPTS=3
DATABASE_RETRY_DELAY=1

# =============================================================================
# Redis Configuration
# =============================================================================

# Redis Cache and Sessions
REDIS_URL=redis://:your_redis_password@localhost:6379/0
REDIS_POOL_SIZE=20
REDIS_SOCKET_KEEPALIVE=True
REDIS_SOCKET_KEEPALIVE_OPTIONS={}

# Redis Clusters (if using Redis Cluster)
# REDIS_CLUSTER_NODES=redis1:6379,redis2:6379,redis3:6379

# =============================================================================
# APG Platform Integration
# =============================================================================

# APG Platform URLs
APG_PLATFORM_URL=https://apg.platform.url
APG_COMPOSITION_ENGINE_URL=https://composition.apg.platform.url
APG_DISCOVERY_SERVICE_URL=https://discovery.apg.platform.url
APG_MARKETPLACE_URL=https://marketplace.apg.platform.url

# APG Authentication
APG_TENANT_ID=your-tenant-id
APG_API_KEY=your-apg-api-key
APG_CLIENT_ID=your-client-id
APG_CLIENT_SECRET=your-client-secret

# APG Integration Settings
APG_SYNC_INTERVAL=300
APG_AUTO_SYNC=True
APG_CONFLICT_RESOLUTION=latest_wins

# =============================================================================
# External Services
# =============================================================================

# Elasticsearch (Optional - for advanced search)
ELASTICSEARCH_URL=http://localhost:9200
ELASTICSEARCH_INDEX_PREFIX=apg_registry
ELASTICSEARCH_TIMEOUT=30

# SMTP Email Configuration
SMTP_SERVER=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_USE_TLS=True
SMTP_FROM_EMAIL=noreply@datacraft.co.ke
SMTP_FROM_NAME=APG Registry

# File Storage
STORAGE_BACKEND=local  # Options: local, s3, azure, gcp
STORAGE_LOCAL_PATH=/app/uploads

# AWS S3 Configuration (if using S3)
AWS_ACCESS_KEY_ID=your-access-key
AWS_SECRET_ACCESS_KEY=your-secret-key
AWS_S3_BUCKET=apg-registry-files
AWS_REGION=us-east-1
AWS_S3_ENDPOINT_URL=  # Optional: for S3-compatible services

# Azure Blob Storage (if using Azure)
AZURE_STORAGE_ACCOUNT=your-storage-account
AZURE_STORAGE_KEY=your-storage-key
AZURE_CONTAINER_NAME=apg-registry

# Google Cloud Storage (if using GCP)
GOOGLE_CLOUD_PROJECT=your-project-id
GOOGLE_CLOUD_BUCKET=apg-registry-files
GOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account.json

# =============================================================================
# Security Configuration
# =============================================================================

# JWT Configuration
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=30
JWT_ISSUER=apg-registry
JWT_AUDIENCE=apg-platform

# CORS Configuration
CORS_ORIGINS=http://localhost:3000,http://localhost:8080,https://your-frontend.com
CORS_ALLOW_CREDENTIALS=True
CORS_ALLOW_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOW_HEADERS=*

# Rate Limiting
RATE_LIMIT_ENABLED=True
RATE_LIMIT_REQUESTS_PER_MINUTE=100
RATE_LIMIT_BURST=20
RATE_LIMIT_STORAGE=redis

# =============================================================================
# Feature Flags
# =============================================================================

# Core Features
ENABLE_MARKETPLACE_INTEGRATION=True
ENABLE_REAL_TIME_COLLABORATION=True
ENABLE_ANALYTICS_DASHBOARD=True
ENABLE_MOBILE_API=True
ENABLE_WEBHOOKS=True
ENABLE_COMPOSITION_VALIDATION=True
ENABLE_VERSION_MANAGEMENT=True

# Advanced Features
ENABLE_AI_RECOMMENDATIONS=False
ENABLE_BLOCKCHAIN_VERIFICATION=False
ENABLE_ADVANCED_SEARCH=True
ENABLE_CACHING=True
ENABLE_COMPRESSION=True

# Experimental Features
ENABLE_GRAPHQL_API=False
ENABLE_GRPC_API=False
ENABLE_BATCH_PROCESSING=True

# =============================================================================
# Performance Configuration
# =============================================================================

# Connection Pools
ASYNC_POOL_SIZE=100
MAX_CONNECTIONS_PER_HOST=20
REQUEST_TIMEOUT=30
KEEP_ALIVE_TIMEOUT=5

# Caching
CACHE_TTL=3600  # 1 hour
CACHE_MAX_SIZE=10000
CACHE_BACKEND=redis  # Options: redis, memory, memcached

# Background Tasks
CELERY_BROKER_URL=redis://:your_redis_password@localhost:6379/1
CELERY_RESULT_BACKEND=redis://:your_redis_password@localhost:6379/2
CELERY_TASK_SERIALIZER=json
CELERY_RESULT_SERIALIZER=json
CELERY_TIMEZONE=UTC
CELERY_WORKER_CONCURRENCY=4

# =============================================================================
# Monitoring and Observability
# =============================================================================

# Metrics
ENABLE_METRICS=True
METRICS_PORT=9090
METRICS_PATH=/metrics
PROMETHEUS_MULTIPROC_DIR=/tmp/prometheus_multiproc_dir

# Distributed Tracing
ENABLE_TRACING=True
JAEGER_ENDPOINT=http://localhost:14268/api/traces
JAEGER_SERVICE_NAME=apg-capability-registry
TRACE_SAMPLE_RATE=0.1

# Logging
LOG_FORMAT=json  # Options: json, text
LOG_FILE=/app/logs/registry.log
LOG_MAX_SIZE=100MB
LOG_BACKUP_COUNT=5
LOG_ROTATION=daily

# Health Checks
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=10
HEALTH_CHECK_RETRIES=3

# =============================================================================
# Development and Testing
# =============================================================================

# Testing
TEST_DATABASE_URL=postgresql://registry_user:test_password@localhost:5432/apg_registry_test
TEST_REDIS_URL=redis://localhost:6379/15

# Development Tools
RELOAD_ON_CHANGE=True
DEBUG_TOOLBAR=True
PROFILING_ENABLED=False

# API Documentation
DOCS_URL=/api/docs
REDOC_URL=/api/redoc
OPENAPI_URL=/api/openapi.json

# =============================================================================
# Production Overrides
# =============================================================================

# For production, override these values:
# DEBUG=False
# LOG_LEVEL=WARNING
# RELOAD_ON_CHANGE=False
# DEBUG_TOOLBAR=False
# DOCS_URL=  # Disable docs in production
# REDOC_URL=  # Disable redoc in production