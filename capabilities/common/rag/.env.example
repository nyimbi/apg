# APG RAG Environment Configuration Template
# Copy this file to .env and customize for your environment

# =============================================================================
# ENVIRONMENT & BASIC CONFIGURATION
# =============================================================================
ENVIRONMENT=production
TENANT_ID=your-tenant-id
CAPABILITY_ID=rag

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# PostgreSQL connection string with pgvector and pgai extensions
DATABASE_URL=postgresql://apg_user:your_secure_password@localhost:5432/apg_rag
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=30

# Database credentials (used in docker-compose)
POSTGRES_PASSWORD=your_secure_password_2025

# =============================================================================
# OLLAMA AI INTEGRATION
# =============================================================================
# Comma-separated list of Ollama service URLs
OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_URLS=http://localhost:11434,http://ollama-2:11434
OLLAMA_TIMEOUT=60
OLLAMA_MAX_RETRIES=3

# =============================================================================
# SECURITY & ENCRYPTION
# =============================================================================
# Base64 encoded encryption key (32+ characters recommended)
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
ENCRYPTION_KEY=your-base64-encryption-key-here

# Audit log retention (days)
AUDIT_RETENTION_DAYS=2555

# Enable security monitoring
ENABLE_SECURITY_MONITORING=true

# =============================================================================
# SSL/TLS CONFIGURATION
# =============================================================================
ENABLE_HTTPS=false
SSL_CERT_PATH=/path/to/your/certificate.crt
SSL_KEY_PATH=/path/to/your/private-key.key

# =============================================================================
# SERVICE CONFIGURATION
# =============================================================================
SERVICE_HOST=0.0.0.0
SERVICE_PORT=5000

# =============================================================================
# PERFORMANCE & RESOURCE LIMITS
# =============================================================================
MAX_CONCURRENT_OPERATIONS=100
OPERATION_TIMEOUT_SECONDS=300
MAX_MEMORY_MB=4096
MAX_CPU_PERCENT=80.0

# =============================================================================
# MONITORING & METRICS
# =============================================================================
ENABLE_METRICS=true
METRICS_PORT=9090
LOG_LEVEL=INFO

# Prometheus configuration
PROMETHEUS_PORT=9091

# Grafana configuration
GRAFANA_PASSWORD=admin_password_2025

# =============================================================================
# CACHING (REDIS)
# =============================================================================
REDIS_URL=redis://localhost:6379/0
REDIS_PASSWORD=

# =============================================================================
# FILE STORAGE (MINIO/S3)
# =============================================================================
# MinIO credentials for document storage
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin123
MINIO_ENDPOINT=http://localhost:9000
MINIO_BUCKET=apg-rag-documents

# AWS S3 configuration (alternative to MinIO)
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_REGION=us-east-1
AWS_S3_BUCKET=apg-rag-documents

# =============================================================================
# BACKUP CONFIGURATION
# =============================================================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM (cron format)
BACKUP_RETENTION_DAYS=30
BACKUP_LOCATION=/app/data/backups

# =============================================================================
# DEVELOPMENT & TESTING
# =============================================================================
# Enable development features
ENABLE_RELOAD=false
ENABLE_DEBUG=false

# Testing configuration
TEST_DATABASE_URL=postgresql://test_user:test_pass@localhost:5433/apg_rag_test

# =============================================================================
# EXTERNAL INTEGRATIONS
# =============================================================================
# LDAP configuration for enterprise authentication
LDAP_SERVER=ldap://your-ldap-server:389
LDAP_BIND_DN=cn=admin,dc=company,dc=com
LDAP_BIND_PASSWORD=ldap_password
LDAP_USER_SEARCH_BASE=ou=users,dc=company,dc=com

# SAML SSO configuration
SAML_ENTITY_ID=https://your-domain.com/saml
SAML_SSO_URL=https://your-idp.com/sso
SAML_X509_CERT=/path/to/saml.crt

# OAuth configuration
OAUTH_CLIENT_ID=your-oauth-client-id
OAUTH_CLIENT_SECRET=your-oauth-client-secret
OAUTH_REDIRECT_URI=https://your-domain.com/oauth/callback

# =============================================================================
# NOTIFICATION & ALERTING
# =============================================================================
# Email configuration for alerts
SMTP_HOST=smtp.your-domain.com
SMTP_PORT=587
SMTP_USERNAME=alerts@your-domain.com
SMTP_PASSWORD=email_password
SMTP_USE_TLS=true

# Slack webhook for notifications
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK

# PagerDuty integration
PAGERDUTY_INTEGRATION_KEY=your-pagerduty-key

# =============================================================================
# DEPLOYMENT CONFIGURATION
# =============================================================================
# Data directory for persistent volumes
DATA_PATH=./data

# Container resource limits
CONTAINER_MEMORY_LIMIT=4g
CONTAINER_CPU_LIMIT=4.0

# Scaling configuration
MIN_REPLICAS=2
MAX_REPLICAS=10
TARGET_CPU_UTILIZATION=70

# =============================================================================
# ADVANCED CONFIGURATION
# =============================================================================
# Feature flags
ENABLE_ADVANCED_ANALYTICS=true
ENABLE_CONVERSATION_ANALYTICS=true
ENABLE_DOCUMENT_VERSIONING=true
ENABLE_COLLABORATIVE_FEATURES=true

# Performance tuning
VECTOR_INDEX_TYPE=ivfflat  # or hnsw
VECTOR_INDEX_LISTS=1000
VECTOR_INDEX_PROBES=10

# Content processing
DEFAULT_CHUNK_SIZE=1000
DEFAULT_CHUNK_OVERLAP=200
MAX_DOCUMENT_SIZE_MB=100

# RAG configuration
DEFAULT_SIMILARITY_THRESHOLD=0.7
DEFAULT_MAX_RETRIEVALS=10
DEFAULT_GENERATION_MODEL=qwen3  # or deepseek-r1
DEFAULT_EMBEDDING_MODEL=bge-m3

# =============================================================================
# COMPLIANCE & LEGAL
# =============================================================================
# Regulatory compliance settings
GDPR_COMPLIANCE_ENABLED=true
CCPA_COMPLIANCE_ENABLED=true
HIPAA_COMPLIANCE_ENABLED=false

# Data retention policies
PERSONAL_DATA_RETENTION_DAYS=2555  # 7 years
CONVERSATION_DATA_RETENTION_DAYS=365
LOG_DATA_RETENTION_DAYS=2555

# Geographic restrictions
ALLOWED_COUNTRIES=US,CA,GB,DE,FR  # ISO country codes
DATA_RESIDENCY_REGION=us-east-1

# =============================================================================
# CUSTOM EXTENSIONS
# =============================================================================
# Custom plugin configuration
ENABLE_CUSTOM_PLUGINS=false
PLUGIN_DIRECTORY=/app/plugins

# Webhook endpoints
DOCUMENT_PROCESSING_WEBHOOK_URL=
QUERY_ANALYTICS_WEBHOOK_URL=
SYSTEM_ALERT_WEBHOOK_URL=

# =============================================================================
# DOCKER & KUBERNETES CONFIGURATION
# =============================================================================
# Docker build arguments
BUILD_DATE=2025-01-29T10:00:00Z
VCS_REF=main
VERSION=1.0.0

# Kubernetes namespace
K8S_NAMESPACE=apg-rag

# Service mesh configuration
ISTIO_ENABLED=false
CONSUL_ENABLED=false

# =============================================================================
# EXAMPLE VALUES FOR TESTING
# =============================================================================
# Uncomment and modify these for local development/testing

# DATABASE_URL=postgresql://postgres:postgres@localhost:5432/apg_rag_dev
# OLLAMA_BASE_URL=http://localhost:11434
# ENCRYPTION_KEY=dGVzdC1lbmNyeXB0aW9uLWtleS1mb3ItZGV2ZWxvcG1lbnQ=
# REDIS_URL=redis://localhost:6379/0
# LOG_LEVEL=DEBUG
# ENABLE_RELOAD=true